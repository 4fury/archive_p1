#
# Mageia kernel series file
#
# This file describes the order in which patches should be applied
# in the kernel and why the patch is needed.
#
# Luiz Fernando N. Capitulino
# <lcapitulino@mandriva.com.br>

###
### Upstream git
###

###
### Stable Queue
###
stable-gre-fix-the-inner-mac-header-in-nbma-tunnel-xmit-path.patch
stable-net-mlx4-cache-line-cqe-eqe-stride-fixes.patch
stable-netlink-always-copy-on-mmap-tx.patch
stable-netlink-don-t-reorder-loads-stores-before-marking-mmap-netlink-frame-as-available.patch
stable-geneve-remove-socket-and-offload-handlers-at-destruction.patch
stable-geneve-fix-races-between-socket-add-and-release.patch
stable-xen-netback-support-frontends-without-feature-rx-notify-again.patch
stable-net-drop-the-packet-when-fails-to-do-software-segmentation-or-header-check.patch
stable-in6-fix-conflict-with-glibc.patch
stable-tg3-tg3_disable_ints-using-uninitialized-mailbox-value-to-disable-interrupts.patch
stable-batman-adv-calculate-extra-tail-size-based-on-queued-fragments.patch
stable-batman-adv-unify-fragment-size-calculation.patch
stable-batman-adv-avoid-null-dereferences-and-fix-if-check.patch
stable-net-mlx4_en-doorbell-is-byteswapped-in-little-endian-archs.patch
stable-tcp6-don-t-move-ip6cb-before-xfrm6_policy_check.patch
stable-net-fix-stacked-vlan-offload-features-computation.patch
stable-net-reset-secmark-when-scrubbing-packet.patch
stable-net-core-handle-csum-for-checksum_complete-vxlan-forwarding.patch
stable-net-generalize-ndo_gso_check-to-ndo_features_check.patch
stable-net-mlx4_core-correcly-update-the-mtt-s-offset-in-the-mr-re-reg-flow.patch
stable-tcp-do-not-apply-tso-segment-limit-to-non-tso-packets.patch
stable-xen-netback-fixing-the-propagation-of-the-transmit-shaper-timeout.patch
stable-alx-fix-alx_poll.patch
stable-team-avoid-possible-underflow-of-count_pending-value-for-notify_peers-and-mcast_rejoin.patch
stable-enic-fix-rx-skb-checksum.patch
stable-drm-vmwgfx-don-t-use-memory-accounting-for-kernel-side-fence-objects.patch
stable-drm-vmwgfx-fix-error-printout-on-signals-pending.patch
stable-drm-vmwgfx-fix-fence-event-code.patch
stable-drm-ttm-avoid-memory-allocation-from-shrinker-functions.patch
stable-drm-fb_helper-move-deferred-fb-checking-into-restore-mode-v2.patch
stable-drm-dp-retry-aux-transactions-32-times-v1.1.patch
stable-drm-dp-mst-remove-branches-before-dropping-the-reference.patch
stable-drm-radeon-fix-typo-in-ci-dpm-disable.patch
stable-drm-radeon-work-around-a-hw-bug-in-mgcg-on-cik.patch
stable-drm-radeon-check-the-right-ring-in-radeon_evict_flags.patch
stable-drm-radeon-kv-has-three-pplls-v2.patch
stable-drm-radeon-fix-sad_count-check-for-dce3.patch
stable-drm-radeon-adjust-default-bapm-settings-for-kv.patch
stable-drm-radeon-properly-filter-dp1.2-4k-modes-on-non-dp1.2-hw.patch
stable-drm-i915-don-t-complain-about-stolen-conflicts-on-gen3.patch
stable-drm-i915-disallow-pin-ioctl-completely-for-kms-drivers.patch
stable-drm-i915-only-warn-the-first-time-we-attempt-to-mmio-whilst-suspended.patch
stable-drm-i915-resume-mst-after-reading-back-hw-state.patch
stable-drm-i915-save-restore-gmbus-freq-across-suspend-resume-on-gen4.patch
stable-drm-nv4c-mc-disable-msi.patch
stable-drm-i915-invalidate-media-caches-on-gen7.patch
stable-drm-i915-force-the-cs-stall-for-invalidate-flushes.patch
stable-drm-i915-disable-psmi-sleep-messages-on-all-rings-around-context-switches.patch
stable-drm-i915-don-t-call-intel_prepare_page_flip-multiple-times-on-gen2-4.patch
stable-drm-irq-bug_on-warn_on.patch
stable-arc-move-peripherals-to-match-model-to-fpga.patch
stable-cxl-change-contexts_lock-to-a-mutex-to-fix-sleep-while-atomic-bug.patch
stable-cxl-add-timeout-to-process-element-commands.patch
stable-cxl-unmap-mmio-regions-when-detaching-a-context.patch
stable-xhci-check-if-slot-is-already-in-default-state-before-moving-it-there.patch
stable-xhci-add-broken-streams-quirk-for-fresco-logic-fl1000g-xhci-controllers.patch
stable-nl80211-check-matches-array-length-before-acessing-it.patch
stable-cfg80211-don-t-warn-about-two-consecutive-country-ie-hint.patch
stable-cfg80211-avoid-mem-leak-on-driver-hint-set.patch
stable-cfg80211-fix-160-mhz-channels-with-80-80-and-160-mhz-drivers.patch
stable-rtlwifi-rtl8192ce-set-fw_ready-flag.patch
stable-rtlwifi-fix-error-when-accessing-unmapped-memory-in-skb.patch
stable-asus-nb-wmi-add-another-wapf-4-quirk.patch
stable-hp_accel-add-support-for-hp-zbook-15.patch
stable-tick-powerclamp-remove-tick_nohz_idle-abuse.patch
stable-uapi-linux-target_core_user.h-fix-headers_install.sh-badness.patch
stable-tcm_loop-fix-wrong-i_t-nexus-association.patch
stable-ib-iser-fix-possible-sq-overflow.patch
stable-genirq-prevent-proc-race-against-freeing-of-irq-descriptors.patch
stable-iscsi-target-fail-connection-on-short-sendmsg-writes.patch
stable-iscsi-iser-target-initiate-termination-only-once.patch
stable-iser-target-fix-flush-disconnect-completion-handling.patch
stable-iser-target-parallelize-cm-connection-establishment.patch
stable-iser-target-fix-connected_handler-teardown-flow-race.patch
stable-iser-target-handle-addr_change-event-for-listener-cm_id.patch
stable-iser-target-fix-implicit-termination-of-connections.patch
stable-iser-target-allocate-pi-contexts-dynamically.patch
stable-iser-target-fix-null-dereference-in-sw-mode-dif.patch
stable-iscsi-iser-target-expose-supported-protection-ops-according-to-t10_pi.patch
stable-revert-drm-i915-preserve-vgacntr-bits-from-the-bios.patch
stable-revert-mpt2sas-remove-phys-on-topology-change.patch
stable-revert-mpt3sas-remove-phys-on-topology-change.patch
stable-scsi-blacklist-rsoc-for-microsoft-iscsi-target-devices.patch
stable-scsi-fix-random-memory-corruption-with-scsi-mq-t10-pi.patch
stable-scsi-fix-regression-in-scsi_send_eh_cmnd.patch
stable-clk-samsung-fix-double-add-of-syscore-ops-after-driver-rebind.patch
stable-clk-really-fix-deadlock-with-mmap_sem.patch
stable-clk-don-t-try-to-use-a-struct-clk-after-it-could-have-been-freed.patch
stable-revert-clk-ppc-corenet-fix-section-mismatch-warning.patch
stable-clk-rockchip-fix-rk3288-cpuclk-core-dividers.patch
stable-clk-rockchip-fix-rk3066-pll-lock-bit-location.patch
stable-clk-berlin-bg2q-remove-non-exist-smemc-gate-clock.patch
stable-clk-at91-keep-slow-clk-enabled-to-prevent-system-hang.patch
stable-arm-dts-berlin-fix-io-clk-and-add-missing-core-clk-for.patch
stable-bugon.cocci-fix-options-at-the-macro.patch
stable-dm-fix-missed-error-code-if-.end_io-isn-t-implemented-by-target_type.patch
stable-parisc-fix-out-of-register-compiler-error-in-ldcw-inline-assembler-function.patch
stable-serial-fix-parisc-boot-hang.patch

###
### Arch x86
###

# laptop needing pci=assign-busses (#18989, needs to be submitted upstream)
x86-pci-toshiba-equium-a60-assign-busses.patch

# If users choose a bad video mode, allow to jump to
# a working one (TTL: forever)
x86-boot-video-80x25-if-break.patch

# Allow poweroff on UP machines running SMP kernels
x86-default_poweroff_up_machines.patch

# Fix #38760, need to be revised and submitted upstream
# BROKEN: x86-cpufreq-speedstep-dothan-3.patch

# raise vmalloc to fix https://bugs.mageia.org/show_bug.cgi?id=904
x86-increase-default-minimum-vmalloc-area-by-64MB-to-192MB.patch

# https://bugs.mageia.org/show_bug.cgi?id=11532
# hide error that breaks bootsplash
arch-x86-kernel-tsc-hide-warning.patch

###
### Core
###

rcu-Fix-rcu_barrier-race-that-could-result-in-too-short-wait.patch

###
### i2c
###

###
### PCI core
###

# BROKEN: pci-pciprobe-CardBusNo.patch

# http://lkml.org/lkml/2008/9/12/52
pci-add-ALI-M5229-ide-compatibility-mode-quirk.patch
pci-quirks-drop-devinit-exit.patch

###
### PNP core
###

# Turns pnpbios off by default, useful, since pnpbios
# is know to cause problems (TTL: forever)
pnp-pnpbios-off-by-default.patch

pnp-isapnp-async-init.patch

###
### ACPI
###

# CLEVO M360S acpi irq workaround
acpi-CLEVO-M360S-disable_acpi_irq.patch

# Clevo M720SR freezes with C3
acpi-processor-M720SR-limit-to-C2.patch

# speedup
acpi_osl-speedup-grace-period-in-acpi_os_map_cleanup.patch

###
### Block
###

# epsa2 SCSI driver, don't know from where it came
scsi-ppscsi-2.6.2.patch

# epsa2 is far behind
scsi-ppscsi_fixes.patch

# Fix build of ppscsi on 2.6.24
scsi-ppscsi-sg-helper-update.patch

# Update/fix for ppscsi on 2.6.25
scsi-ppscsi-update-for-scsi_data_buffer.patch

# https://qa.mandriva.com/show_bug.cgi?id=45393
scsi-ppscsi-mdvbz45393.patch

# epsa2 3.0 buildfix
scsi-ppscsi-3.0-buildfix.patch

# Don't know know why this is needed
scsi-megaraid-new-sysfs-name.patch

# Looks like fixes from Arnaud, not sure why they're needed
ide-pci-sis5513-965.patch

mpt-vmware-fix.patch

# adds aliases to support upgrade from old dm-raid45 patch
dm-raid-aliases.patch

# disable floppy autoloading (mga #4696)
block-floppy-disable-pnp-modalias.patch

# prefer ata over ide drivers
ata-prefer-ata-drivers-over-ide-drivers-when-both-are-built.patch

# korg #81551
ata-jmicron-disable-broken-async_suspend.patch

# block fixes
blk-mq-Use-all-available-hardware-queues.patch

###
### File-system
###

# aufs from: http://aufs.sourceforge.net/ (mga#8314)
fs-aufs-3.18.patch
fs-aufs-3.18-modular.patch
fs-aufs-adapt-for-3.18.1-d_child-change.patch

###
### FireWire
###

# adding module aliases to ease upgrade from ieee1394
firewire-ieee1394-module-aliases.patch

###
### GPU/DRM
###

# new Q57 Host Bridge id
char-agp-intel-new-Q57-id.patch

# External mach64 drm support from git://anongit.freedesktop.org/git/mesa/drm
gpu-drm-mach64.patch
gpu-drm-mach64-fixes.patch
gpu-drm-mach64-2.6.31.patch
gpu-drm-mach64-fix-for-changed-drm_pci_alloc.patch
gpu-drm-mach64-fix-for-changed-drm_ioctl.patch
gpu-drm-mach64-2.6.36-buildfix.patch
gpu-drm-mach64-2.6.37-buildfix.patch
gpu-drm-mach64-3.0-buildfix.patch
gpu-drm-mach64-include-module.h.patch
gpu-drm-mach64-3.3-buildfix.patch
gpu-drm-mach64-3.6-buildfix.patch
gpu-drm-mach64-3.7-buildfix.patch
gpu-drm-mach64-3.12-buildfix.patch
gpu-drm-mach64-restore-mach64_PCI_IDS.patch
gpu-drm-mach64-linux-3.14-buildfix.patch
gpu-drm-mach64-3.17-buildfix.patch
gpu-drm-mach64-3.18-buildfix.patch

# nouveau
gpu-drm-nouveau-a-somehow-missed-hunk-of-fix-regression-.patch

# radeon
gpu-drm-radeon-fix-for-memory-training-on-bonaire-0x6649.patch

# i915
gpu-drm-i915-filter-fifo-underruns-on-GMCH.patch
gpu-drm-i915-Ban-Haswell-from-using-RCS-flips.patch
# nice speedup
gpu-drm-i915-Make-sample_c-messages-go-faster-on-Haswell.patch

###
### Hardware Monitoring
###

###
### Input
###

input-i8042-quirks-for-Fujitsu-Lifebook-A544-and-Lif.patch

# mga #14897
input-psmouse-Add-some-support-for-the-FocalTech-PS2-protocol-extensions.patch

###
### idle
###

###
### Kbuild
###

###
### Media
###

###
### Misc
###
mei-clean-reset-bit-before-reset.patch

###
### MM
###
x86-mm-consolidate-VM_FAULT_RETRY-handling.patch
x86-mm-move-mmap_sem-unlock-from-mm_fault_error-to-c.patch
x86-mm-fix-VM_FAULT_RETRY-handling.patch

mm-vmscan-wake-up-all-pfmemalloc-throttled-processes-at-once.patch

###
### Network
###

# SiS 190 fixes
net-sis190-fix-list-usage.patch

# netfilter IFWLOG support
net-netfilter-IFWLOG.patch
net-netfilter-IFWLOG-mdv.patch
net-netfilter-IFWLOG-2.6.35-buildfix.patch
net-netfilter-IFWLOG-2.6.37-buildfix.patch
net-ipv4-netfilter-ipt_IFWLOG-3.6-buildfix.patch
net-netfilter-IFWLOG-3.7-buildfix.patch

# netfilter psd support
net-netfilter-psd.patch
net-netfilter-psd-mdv.patch
net-netfilter-psd-2.6.35-buildfix.patch

# iwlwifi
net-wireless-iwlwifi-mvm-fix-Rx-with-both-chains.patch

# ath9k
net-wireless-ath9k-Update-PCI-IDs-for-AR9565.patch

###
### Platform drivers
###

# Allow access to Shuttle WMI interface controls
# (Mainly allow turning on/off webcam and wireless on Shuttle DA18IE and DA18IM)
platform-x86-add-shuttle-wmi-driver.patch
platform-x86-shuttle-wmi-drop-devinit-exit.patch

###
### RTC
###

###
### Serial
###

# Export pci_ids.h to user space, needed by ldetect
include-kbuild-export-pci_ids.patch

###
### Sound
###

# adds bluetooth sco support
sound-bluetooth-SCO-support.patch

###
### Staging
###


###
### TTY
###

###
### USB
###

# http://qa.mandriva.com/show_bug.cgi?id=30638
bluetooth-hci_usb-disable-isoc-transfers.patch

hid-usbhid-IBM-BladeCenterHS20-quirk.patch

usb-storage-unusual_devs-add-id.patch
usb-storage-unusual_devs-add-id-2.6.37-buildfix.patch

###
### V4L
###

# pwc driver name in /proc/bus/devices, /sys fix and "advertisement" removal
media-usb-pwc-lie-in-proc-usb-devices.patch

###
### Video
###

# Mageia framebuffer boot logo
video-mageia-logo.patch

# https://qa.mandriva.com/show_bug.cgi?id=59260
# https://bugzilla.kernel.org/show_bug.cgi?id=26232
# DISABLED: video-fb-avoid-oops-when-fw-fb-is-removed.patch
# DISABLED: video-fb-avoid-deadlock-caused-by-fb_set_suspend.patch

###
### 3rdparty
###

3rd-3rdparty-1.0-tree.patch

# TODO: fix up patch below to include all archs?
3rd-3rdparty-merge.patch

# acerhk
3rd-acerhk-0.5.35.patch
3rd-acerhk-kbuild.patch
3rd-acerhk-extra-cflags.patch
3rd-acerhk-proc_dir_entry-owner.patch
3rd-acerhk-fix-build-with-function-tracer.patch
3rd-acerhk-2.6.36-buildfix.patch
3rd-acerhk-fix-include.patch

# aes2501
3rd-aes2501-r19.patch
3rd-aes2501-kbuild.patch
3rd-aes2501-rmmod-oops-fix.patch

# ndiswrapper
3rd-ndiswrapper-1.59.patch
3rd-ndiswrapper-Kconfig.patch
3rd-ndiswrapper-Makefile-build-fix.patch
3rd-ndiswrapper-linux-3.14-buildfix.patch

# rfswitch
3rd-rfswitch-1.3.patch
3rd-rfswitch-build-fix.patch
3rd-rfswitch-3.0-buildfix.patch

# viahss
3rd-viahss-0.92.patch
3rd-viahss-config.patch
3rd-viahss-module-license.patch
3rd-viahss-2.6.35-buildfix.patch
3rd-viahss-3.0-buildfix.patch

###
### Security
###

###
### Smack fixes
###

###
### XEN
###

###
### ARM
###

###
### Tools
###
